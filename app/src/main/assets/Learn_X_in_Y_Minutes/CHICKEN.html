<!DOCTYPE html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="en-us">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Learn CHICKEN in Y Minutes</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="index.css">

        <link rel="canonical" href="https://learnxinyminutes.com/docs/CHICKEN/">
        <script>
            function set_theme(theme) {
                var el = document.getElementsByTagName("html")[0];

                if (theme === "dark" ) {
                    el.className = "dark";
                } else {
                    el.className = "light";
                }

                localStorage.setItem("lxiym_theme", theme);
            }

            var theme = localStorage.getItem("lxiym_theme");
            if (theme) {
                set_theme(theme);
            }
        </script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
            <div class="share">
    <span class="sharemsg">
      <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Flearnxinyminutes.com%2Fdocs%2FCHICKEN%2F&text=Learn+X+in+Y+minutes%2C+where+X%3DCHICKEN">
        Share this page
      </a></span>

      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
  </div>
  <div class="theme-choice">
    <label id="theme-label">Select theme:</label>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('light');">light</button>
    <button type="button" aria-labelledby="theme-label" onclick="set_theme('dark');">dark</button>
  </div>
  <h1><a href="/">Learn X in Y minutes</a></h2>
  <h2>Where X=CHICKEN</h2>
    <p class="filelink">
    Get the code:
    <a href="/docs/files/CHICKEN.scm">CHICKEN.scm</a>
    </p>
  <div id="doc">
    <p>CHICKEN is an implementation of Scheme programming language that can
compile Scheme programs to C code as well as interpret them. CHICKEN
supports R5RS and R7RS (work in progress) standards and many extensions.</p>
<div class="highlight"><pre><span></span><span class="c1">;; #!/usr/bin/env csi -s</span>

<span class="c1">;; Run the CHICKEN REPL in the commandline as follows :</span>
<span class="c1">;; $ csi</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 0. Syntax</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Single line comments start with a semicolon</span>

<span class="cm">#| Block comments</span>
<span class="cm">   can span multiple lines and...</span>
<span class="cm">   #| can be nested</span>
<span class="cm">   |#</span>
<span class="cm">|#</span>

<span class="c1">;; S-expression comments are used to comment out expressions</span>
<span class="c">#; (display &quot;nothing&quot;)</span>    <span class="c1">; discard this expression </span>

<span class="c1">;; CHICKEN has two fundamental pieces of syntax: Atoms and S-expressions</span>
<span class="c1">;; an atom is something that evaluates to itself</span>
<span class="c1">;; all builtin data types viz. numbers, chars, booleans, strings etc. are atoms</span>
<span class="c1">;; Furthermore an atom can be a symbol, an identifier, a keyword, a procedure</span>
<span class="c1">;; or the empty list (also called null)</span>
<span class="ss">&#39;athing</span>              <span class="c1">;; =&gt; athing </span>
<span class="ss">&#39;+</span>                   <span class="c1">;; =&gt; + </span>
<span class="nv">+</span>                    <span class="c1">;; =&gt; &lt;procedure C_plus&gt;</span>

<span class="c1">;; S-expressions (short for symbolic expressions) consists of one or more atoms</span>
<span class="p">(</span><span class="k">quote </span><span class="nv">+</span><span class="p">)</span>            <span class="c1">;; =&gt; + ; another way of writing &#39;+</span>
<span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>            <span class="c1">;; =&gt; 6 ; this S-expression evaluates to a function call</span>
<span class="o">&#39;</span><span class="p">(</span><span class="nv">+</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>           <span class="c1">;; =&gt; (+ 1 2 3) ; evaluates to a list </span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 1. Primitive Datatypes and Operators </span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Numbers</span>
<span class="mi">99999999999999999999</span> <span class="c1">;; integers</span>
<span class="o">#</span><span class="nv">b1010</span>               <span class="c1">;; binary ; =&gt; 10</span>
<span class="o">#</span><span class="nv">o10</span>                 <span class="c1">;; octal  ; =&gt; 8</span>
<span class="o">#</span><span class="nv">x8ded</span>               <span class="c1">;; hexadecimal ; =&gt; 36333</span>
<span class="mf">3.14</span>                 <span class="c1">;; real</span>
<span class="mf">6.02</span><span class="nv">e+23</span>
<span class="mi">3</span><span class="nv">/4</span>                  <span class="c1">;; rational</span>

<span class="c1">;;Characters and Strings</span>
<span class="sc">#\A</span>                  <span class="c1">;; A char</span>
<span class="s">&quot;Hello, World!&quot;</span>      <span class="c1">;; strings are fixed-length arrays of characters</span>

<span class="c1">;; Booleans</span>
<span class="no">#t</span>                  <span class="c1">;; true</span>
<span class="no">#f</span>                  <span class="c1">;; false</span>

<span class="c1">;; Function call is written as (f x y z ...)</span>
<span class="c1">;; where f is a function and x,y,z, ... are arguments</span>
<span class="p">(</span><span class="nf">print</span> <span class="s">&quot;Hello, World!&quot;</span><span class="p">)</span>    <span class="c1">;; =&gt; Hello, World!</span>
<span class="c1">;; formatted output</span>
<span class="p">(</span><span class="nf">printf</span> <span class="s">&quot;Hello, ~a.\n&quot;</span> <span class="s">&quot;World&quot;</span><span class="p">)</span>  <span class="c1">;; =&gt; Hello, World.</span>

<span class="c1">;; print commandline arguments</span>
<span class="p">(</span><span class="nb">map </span><span class="nv">print</span> <span class="p">(</span><span class="nf">command-line-arguments</span><span class="p">))</span> 

<span class="p">(</span><span class="nb">list </span><span class="ss">&#39;foo</span> <span class="ss">&#39;bar</span> <span class="ss">&#39;baz</span><span class="p">)</span>          <span class="c1">;; =&gt; (foo bar baz)</span>
<span class="p">(</span><span class="nb">string-append </span><span class="s">&quot;pine&quot;</span> <span class="s">&quot;apple&quot;</span><span class="p">)</span> <span class="c1">;; =&gt; &quot;pineapple&quot;</span>
<span class="p">(</span><span class="nb">string-ref </span><span class="s">&quot;tapioca&quot;</span> <span class="mi">3</span><span class="p">)</span>       <span class="c1">;; =&gt; #\i;; character &#39;i&#39; is at index 3</span>
<span class="p">(</span><span class="nb">string-&gt;list </span><span class="s">&quot;CHICKEN&quot;</span><span class="p">)</span>       <span class="c1">;; =&gt; (#\C #\H #\I #\C #\K #\E #\N)</span>
<span class="p">(</span><span class="nf">string-intersperse</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;1&quot;</span> <span class="s">&quot;2&quot;</span><span class="p">)</span> <span class="s">&quot;:&quot;</span><span class="p">)</span> <span class="c1">;; =&gt; &quot;1:2&quot;</span>
<span class="p">(</span><span class="nf">string-split</span> <span class="s">&quot;1:2:3&quot;</span> <span class="s">&quot;:&quot;</span><span class="p">)</span>     <span class="c1">;; =&gt; (&quot;1&quot; &quot;2&quot; &quot;3&quot;)</span>


<span class="c1">;; Predicates are special functions that return boolean values</span>
<span class="p">(</span><span class="nf">atom?</span> <span class="no">#t</span><span class="p">)</span>                <span class="c1">;; =&gt; #t</span>

<span class="p">(</span><span class="nb">symbol? </span><span class="no">#t</span><span class="p">)</span>              <span class="c1">;; =&gt; #f</span>

<span class="p">(</span><span class="nb">symbol? </span><span class="ss">&#39;+</span><span class="p">)</span>              <span class="c1">;; =&gt; #t</span>

<span class="p">(</span><span class="nb">procedure? </span><span class="nv">+</span><span class="p">)</span>            <span class="c1">;; =&gt; #t</span>

<span class="p">(</span><span class="nb">pair? </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>            <span class="c1">;; =&gt; #t</span>

<span class="p">(</span><span class="nb">pair? </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="o">.</span> <span class="mi">3</span><span class="p">))</span>        <span class="c1">;; =&gt; #t</span>

<span class="p">(</span><span class="nb">pair? </span><span class="o">&#39;</span><span class="p">())</span>               <span class="c1">;; =&gt; #f</span>

<span class="p">(</span><span class="nb">list? </span><span class="o">&#39;</span><span class="p">())</span>               <span class="c1">;; =&gt; #t</span>


<span class="c1">;; Some arithmetic operations</span>

<span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="mi">1</span><span class="p">)</span>                   <span class="c1">;; =&gt; 2</span>
<span class="p">(</span><span class="nb">- </span><span class="mi">8</span> <span class="mi">1</span><span class="p">)</span>                   <span class="c1">;; =&gt; 7</span>
<span class="p">(</span><span class="nb">* </span><span class="mi">10</span> <span class="mi">2</span><span class="p">)</span>                  <span class="c1">;; =&gt; 20</span>
<span class="p">(</span><span class="nb">expt </span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>                <span class="c1">;; =&gt; 8</span>
<span class="p">(</span><span class="nb">remainder </span><span class="mi">5</span> <span class="mi">2</span><span class="p">)</span>           <span class="c1">;; =&gt; 1</span>
<span class="p">(</span><span class="nb">/ </span><span class="mi">35</span> <span class="mi">5</span><span class="p">)</span>                  <span class="c1">;; =&gt; 7</span>
<span class="p">(</span><span class="nb">/ </span><span class="mi">1</span> <span class="mi">3</span><span class="p">)</span>                   <span class="c1">;; =&gt; 0.333333333333333</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 2. Variables</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; You can create variables with define</span>
<span class="c1">;; A variable name can use any character except: ()[]{}&quot;,&#39;`;#\</span>
<span class="p">(</span><span class="k">define </span><span class="nv">myvar</span> <span class="mi">5</span><span class="p">)</span>
<span class="nv">myvar</span>        <span class="c1">;; =&gt; 5</span>

<span class="c1">;; Alias to a procedure</span>
<span class="p">(</span><span class="k">define </span><span class="nv">**</span> <span class="nv">expt</span><span class="p">)</span>
<span class="p">(</span><span class="nf">**</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>     <span class="c1">;; =&gt; 8</span>

<span class="c1">;; Accessing an undefined variable raises an exception</span>
<span class="nv">s</span>            <span class="c1">;; =&gt; Error: unbound variable: s</span>

<span class="c1">;; Local binding</span>
<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">me</span> <span class="s">&quot;Bob&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">print</span> <span class="nv">me</span><span class="p">))</span>     <span class="c1">;; =&gt; Bob</span>

<span class="p">(</span><span class="nf">print</span> <span class="nv">me</span><span class="p">)</span>        <span class="c1">;; =&gt; Error: unbound variable: me</span>

<span class="c1">;; Assign a new value to previously defined variable</span>
<span class="p">(</span><span class="k">set! </span><span class="nv">myvar</span> <span class="mi">10</span><span class="p">)</span> 
<span class="nv">myvar</span>             <span class="c1">;; =&gt; 10</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 3. Collections</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Pairs</span>
<span class="c1">;; &#39;cons&#39; constructs pairs, </span>
<span class="c1">;; &#39;car&#39; extracts the first element, &#39;cdr&#39; extracts the rest of the elements</span>
<span class="p">(</span><span class="nb">cons </span><span class="ss">&#39;subject</span> <span class="ss">&#39;verb</span><span class="p">)</span>       <span class="c1">;; =&gt; &#39;(subject . verb)</span>
<span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nb">cons </span><span class="ss">&#39;subject</span> <span class="ss">&#39;verb</span><span class="p">))</span> <span class="c1">;; =&gt; subject</span>
<span class="p">(</span><span class="nb">cdr </span><span class="p">(</span><span class="nb">cons </span><span class="ss">&#39;subject</span> <span class="ss">&#39;verb</span><span class="p">))</span> <span class="c1">;; =&gt; verb</span>

<span class="c1">;; Lists</span>
<span class="c1">;; cons creates a new list if the second item is a list</span>
<span class="p">(</span><span class="nb">cons </span><span class="mi">0</span> <span class="o">&#39;</span><span class="p">())</span>         <span class="c1">;; =&gt; (0)</span>
<span class="p">(</span><span class="nb">cons </span><span class="mi">1</span> <span class="p">(</span><span class="nb">cons </span><span class="mi">2</span>  <span class="p">(</span><span class="nb">cons </span><span class="mi">3</span> <span class="o">&#39;</span><span class="p">())))</span>    <span class="c1">;; =&gt; (1 2 3)</span>
<span class="c1">;; &#39;list&#39; is a convenience variadic constructor for lists</span>
<span class="p">(</span><span class="nb">list </span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>    <span class="c1">;; =&gt; (1 2 3)</span>


<span class="c1">;; Use &#39;append&#39; to append lists together</span>
<span class="p">(</span><span class="nb">append </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">))</span> <span class="c1">;; =&gt; (1 2 3 4)</span>

<span class="c1">;; Some basic operations on lists</span>
<span class="p">(</span><span class="nb">map </span><span class="nv">add1</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>    <span class="c1">;; =&gt; (2 3 4)</span>
<span class="p">(</span><span class="nb">reverse </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">7</span><span class="p">))</span>   <span class="c1">;; =&gt; (7 4 3 1)</span>
<span class="p">(</span><span class="nf">sort</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">11</span> <span class="mi">22</span> <span class="mi">33</span> <span class="mi">44</span><span class="p">)</span> <span class="nv">&gt;</span><span class="p">)</span>   <span class="c1">;; =&gt; (44 33 22 11)</span>

<span class="p">(</span><span class="k">define </span><span class="nv">days</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">SUN</span> <span class="nv">MON</span> <span class="nv">FRI</span><span class="p">))</span>
<span class="p">(</span><span class="nb">list-ref </span><span class="nv">days</span> <span class="mi">1</span><span class="p">)</span>      <span class="c1">;; =&gt; MON</span>
<span class="p">(</span><span class="k">set! </span><span class="p">(</span><span class="nb">list-ref </span><span class="nv">days</span> <span class="mi">1</span><span class="p">)</span> <span class="ss">&#39;TUE</span><span class="p">)</span>
<span class="nv">days</span>                   <span class="c1">;; =&gt; (SUN TUE FRI)</span>

<span class="c1">;; Vectors</span>
<span class="c1">;; Vectors are heterogeneous structures whose elements are indexed by integers</span>
<span class="c1">;; A Vector typically occupies less space than a list of the same length</span>
<span class="c1">;; Random access of an element in a vector is faster than in a list</span>
<span class="o">#</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>                     <span class="c1">;; =&gt; #(1 2 3) ;; literal syntax</span>
<span class="p">(</span><span class="nb">vector </span><span class="ss">&#39;a</span> <span class="ss">&#39;b</span> <span class="ss">&#39;c</span><span class="p">)</span>            <span class="c1">;; =&gt; #(a b c) </span>
<span class="p">(</span><span class="nb">vector? </span><span class="o">#</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>           <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="nb">vector-length </span><span class="o">#</span><span class="p">(</span><span class="mi">1</span> <span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="s">&quot;a&quot;</span><span class="p">))</span> <span class="c1">;; =&gt; 3</span>
<span class="p">(</span><span class="nb">vector-ref </span><span class="o">#</span><span class="p">(</span><span class="mi">1</span> <span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">3</span><span class="p">))</span> <span class="mi">2</span><span class="p">)</span><span class="c1">;; =&gt; (3 3)</span>

<span class="p">(</span><span class="k">define </span><span class="nv">vec</span> <span class="o">#</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="p">(</span><span class="nb">vector-set! </span><span class="nv">vec</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">)</span>
<span class="nv">vec</span>                         <span class="c1">;; =&gt; #(1 2 4)</span>

<span class="c1">;; Vectors can be created from lists and vice-verca</span>
<span class="p">(</span><span class="nb">vector-&gt;list </span><span class="o">#</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">))</span>     <span class="c1">;; =&gt; &#39;(1 2 4)</span>
<span class="p">(</span><span class="nb">list-&gt;vector </span><span class="o">&#39;</span><span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>     <span class="c1">;; =&gt; #(a b c)</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 4. Functions</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Use &#39;lambda&#39; to create functions.</span>
<span class="c1">;; A function always returns the value of its last expression</span>
<span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="s">&quot;Hello World&quot;</span><span class="p">)</span>   <span class="c1">;; =&gt; #&lt;procedure (?)&gt; </span>

<span class="c1">;; Use extra parens around function definition to execute </span>
<span class="p">((</span><span class="k">lambda </span><span class="p">()</span> <span class="s">&quot;Hello World&quot;</span><span class="p">))</span> <span class="c1">;; =&gt; Hello World ;; argument list is empty</span>

<span class="c1">;; A function with an argument</span>
<span class="p">((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">x</span><span class="p">))</span> <span class="mi">3</span><span class="p">)</span>           <span class="c1">;; =&gt; 9</span>
<span class="c1">;; A function with two arguments</span>
<span class="p">((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">y</span><span class="p">))</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>       <span class="c1">;; =&gt; 6</span>

<span class="c1">;; assign a function to a variable</span>
<span class="p">(</span><span class="k">define </span><span class="nv">sqr</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">x</span><span class="p">)))</span>
<span class="nv">sqr</span>                        <span class="c1">;; =&gt; #&lt;procedure (sqr x)&gt;</span>
<span class="p">(</span><span class="nf">sqr</span> <span class="mi">3</span><span class="p">)</span>                    <span class="c1">;; =&gt; 9</span>

<span class="c1">;; We can shorten this using the function definition syntactic sugar</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">sqr</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>
<span class="p">(</span><span class="nf">sqr</span> <span class="mi">3</span><span class="p">)</span>                    <span class="c1">;; =&gt; 9</span>

<span class="c1">;; We can redefine existing procedures</span>
<span class="p">(</span><span class="nf">foldl</span> <span class="nv">cons</span> <span class="o">&#39;</span><span class="p">()</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span> <span class="c1">;; =&gt; (((((() . 1) . 2) . 3) . 4) . 5)</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">foldl</span> <span class="nv">func</span> <span class="nv">accu</span> <span class="nv">alist</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">null? </span><span class="nv">alist</span><span class="p">)</span>
    <span class="nv">accu</span>
    <span class="p">(</span><span class="nf">foldl</span> <span class="nv">func</span> <span class="p">(</span><span class="nf">func</span> <span class="p">(</span><span class="nb">car </span><span class="nv">alist</span><span class="p">)</span> <span class="nv">accu</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">alist</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">foldl</span> <span class="nv">cons</span> <span class="o">&#39;</span><span class="p">()</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>   <span class="c1">;; =&gt; (5 4 3 2 1)</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 5. Equality</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; For numbers use &#39;=&#39;</span>
<span class="p">(</span><span class="nb">= </span><span class="mi">3</span> <span class="mf">3.0</span><span class="p">)</span>                  <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="nb">= </span><span class="mi">2</span> <span class="mi">1</span><span class="p">)</span>                    <span class="c1">;; =&gt; #f</span>

<span class="c1">;; &#39;eq?&#39; returns #t if two arguments refer to the same object in memory</span>
<span class="c1">;; In other words, it&#39;s a simple pointer comparison.</span>
<span class="p">(</span><span class="nb">eq? </span><span class="o">&#39;</span><span class="p">()</span> <span class="o">&#39;</span><span class="p">())</span>              <span class="c1">;; =&gt; #t ;; there&#39;s only one empty list in memory</span>
<span class="p">(</span><span class="nb">eq? </span><span class="p">(</span><span class="nb">list </span><span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nb">list </span><span class="mi">3</span><span class="p">))</span>    <span class="c1">;; =&gt; #f ;; not the same object</span>
<span class="p">(</span><span class="nb">eq? </span><span class="ss">&#39;yes</span> <span class="ss">&#39;yes</span><span class="p">)</span>            <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="nb">eq? </span><span class="mi">3</span> <span class="mi">3</span><span class="p">)</span>                  <span class="c1">;; =&gt; #t ;; don&#39;t do this even if it works in this case</span>
<span class="p">(</span><span class="nb">eq? </span><span class="mi">3</span> <span class="mf">3.0</span><span class="p">)</span>                <span class="c1">;; =&gt; #f ;; it&#39;s better to use &#39;=&#39; for number comparisons</span>
<span class="p">(</span><span class="nb">eq? </span><span class="s">&quot;Hello&quot;</span> <span class="s">&quot;Hello&quot;</span><span class="p">)</span>      <span class="c1">;; =&gt; #f</span>

<span class="c1">;; &#39;eqv?&#39; is same as &#39;eq?&#39; all datatypes except numbers and characters</span>
<span class="p">(</span><span class="nb">eqv? </span><span class="mi">3</span> <span class="mf">3.0</span><span class="p">)</span>               <span class="c1">;; =&gt; #f</span>
<span class="p">(</span><span class="nb">eqv? </span><span class="p">(</span><span class="nb">expt </span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nb">expt </span><span class="mi">2</span> <span class="mi">3</span><span class="p">))</span> <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="nb">eqv? </span><span class="ss">&#39;yes</span> <span class="ss">&#39;yes</span><span class="p">)</span>           <span class="c1">;; =&gt; #t</span>

<span class="c1">;; &#39;equal?&#39; recursively compares the contents of pairs, vectors, and strings,</span>
<span class="c1">;; applying eqv? on other objects such as numbers and symbols. </span>
<span class="c1">;; A rule of thumb is that objects are generally equal? if they print the same.</span>

<span class="p">(</span><span class="nb">equal? </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span> <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="nb">equal? </span><span class="o">#</span><span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="o">#</span><span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span> <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="nb">equal? </span><span class="ss">&#39;a</span> <span class="ss">&#39;a</span><span class="p">)</span>             <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="nb">equal? </span><span class="s">&quot;abc&quot;</span> <span class="s">&quot;abc&quot;</span><span class="p">)</span>       <span class="c1">;; =&gt; #t</span>

<span class="c1">;; In Summary:</span>
<span class="c1">;; eq? tests if objects are identical</span>
<span class="c1">;; eqv? tests if objects are operationally equivalent</span>
<span class="c1">;; equal? tests if objects have same structure and contents</span>

<span class="c1">;; Comparing strings for equality</span>
<span class="p">(</span><span class="nb">string=? </span><span class="s">&quot;Hello&quot;</span> <span class="s">&quot;Hello&quot;</span><span class="p">)</span> <span class="c1">;; =&gt; #t</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 6. Control Flow</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Conditionals</span>
<span class="p">(</span><span class="k">if </span><span class="no">#t</span>                     <span class="c1">;; test expression</span>
  <span class="s">&quot;True&quot;</span>                   <span class="c1">;; then expression</span>
  <span class="s">&quot;False&quot;</span><span class="p">)</span>                 <span class="c1">;; else expression</span>
                           <span class="c1">;; =&gt; &quot;True&quot;</span>

<span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="mi">3</span> <span class="mi">2</span><span class="p">)</span>
  <span class="s">&quot;yes&quot;</span>
  <span class="s">&quot;no&quot;</span><span class="p">)</span>                    <span class="c1">;; =&gt; &quot;yes&quot;</span>

<span class="c1">;; In conditionals, all values that are not &#39;#f&#39; are treated as true.</span>
<span class="c1">;; 0, &#39;(), #() &quot;&quot; , are all true values</span>
<span class="p">(</span><span class="k">if </span><span class="mi">0</span>
  <span class="s">&quot;0 is not false&quot;</span>
  <span class="s">&quot;0 is false&quot;</span><span class="p">)</span>            <span class="c1">;; =&gt; &quot;0 is not false&quot;</span>

<span class="c1">;; &#39;cond&#39; chains a series of tests and returns as soon as it encounters a true condition</span>
<span class="c1">;; &#39;cond&#39; can be used to simulate &#39;if/elseif/else&#39; statements</span>
<span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">&gt; </span><span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="s">&quot;not true so don&#39;t return this&quot;</span><span class="p">)</span>
      <span class="p">((</span><span class="nb">&lt; </span><span class="mi">2</span> <span class="mi">5</span><span class="p">)</span> <span class="s">&quot;true, so return this&quot;</span><span class="p">)</span>
      <span class="p">(</span><span class="k">else </span><span class="s">&quot;returning default&quot;</span><span class="p">))</span>    <span class="c1">;; =&gt; &quot;true, so return this&quot;</span>


<span class="c1">;; A case expression is evaluated as follows:</span>
<span class="c1">;; The key is evaluated and compared with each datum in sense of &#39;eqv?&#39;,</span>
<span class="c1">;; The corresponding clause in the matching datum is evaluated and returned as result</span>
<span class="p">(</span><span class="k">case </span><span class="p">(</span><span class="nb">* </span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>              <span class="c1">;; the key is 6</span>
  <span class="p">((</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span><span class="p">)</span> <span class="ss">&#39;prime</span><span class="p">)</span>       <span class="c1">;; datum 1</span>
  <span class="p">((</span><span class="mi">1</span> <span class="mi">4</span> <span class="mi">6</span> <span class="mi">8</span><span class="p">)</span> <span class="ss">&#39;composite</span><span class="p">))</span>  <span class="c1">;; datum 2; matched!</span>
                           <span class="c1">;; =&gt; composite</span>

<span class="c1">;; case with else clause</span>
<span class="p">(</span><span class="k">case </span><span class="p">(</span><span class="nb">car </span><span class="o">&#39;</span><span class="p">(</span><span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>
  <span class="p">((</span><span class="nf">a</span> <span class="nv">e</span> <span class="nv">i</span> <span class="nv">o</span> <span class="nv">u</span><span class="p">)</span> <span class="ss">&#39;vowel</span><span class="p">)</span>
  <span class="p">((</span><span class="nf">w</span> <span class="nv">y</span><span class="p">)</span> <span class="ss">&#39;semivowel</span><span class="p">)</span>
  <span class="p">(</span><span class="k">else </span><span class="ss">&#39;consonant</span><span class="p">))</span>       <span class="c1">;; =&gt;  consonant</span>

<span class="c1">;; Boolean expressions</span>
<span class="c1">;; &#39;and&#39; returns the first expression that evaluates to #f</span>
<span class="c1">;; otherwise, it returns the result of the last expression</span>
<span class="p">(</span><span class="k">and </span><span class="no">#t</span> <span class="no">#f</span> <span class="p">(</span><span class="nb">= </span><span class="mi">2</span> <span class="mf">2.0</span><span class="p">))</span>                <span class="c1">;; =&gt; #f</span>
<span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nb">&lt; </span><span class="mi">2</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt; </span><span class="mi">2</span> <span class="mi">0</span><span class="p">)</span> <span class="s">&quot;0 &lt; 2 &lt; 5&quot;</span><span class="p">)</span>    <span class="c1">;; =&gt; &quot;0 &lt; 2 &lt; 5&quot;</span>

<span class="c1">;; &#39;or&#39; returns the first expression that evaluates to #t </span>
<span class="c1">;; otherwise the result of the last expression is returned</span>
<span class="p">(</span><span class="k">or </span><span class="no">#f</span> <span class="no">#t</span> <span class="no">#f</span><span class="p">)</span>                        <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="k">or </span><span class="no">#f</span> <span class="no">#f</span> <span class="no">#f</span><span class="p">)</span>                        <span class="c1">;; =&gt; #f</span>

<span class="c1">;; &#39;when&#39; is like &#39;if&#39; without the else expression</span>
<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">positive? </span><span class="mi">5</span><span class="p">)</span> <span class="s">&quot;I&#39;m positive&quot;</span><span class="p">)</span>  <span class="c1">;; =&gt; &quot;I&#39;m positive&quot;</span>

<span class="c1">;; &#39;unless&#39; is equivalent to (when (not &lt;test&gt;) &lt;expr&gt;)</span>
<span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nb">null? </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span> <span class="s">&quot;not null&quot;</span><span class="p">)</span> <span class="c1">;; =&gt; &quot;not null&quot;</span>


<span class="c1">;; Loops</span>
<span class="c1">;; loops can be created with the help of tail-recursions</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">loop</span> <span class="nv">count</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nb">= </span><span class="nv">count</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">print</span> <span class="s">&quot;hello&quot;</span><span class="p">)</span> 
    <span class="p">(</span><span class="nf">loop</span> <span class="p">(</span><span class="nf">sub1</span> <span class="nv">count</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">loop</span> <span class="mi">4</span><span class="p">)</span>                             <span class="c1">;; =&gt; hello, hello ...</span>

<span class="c1">;; Or with a named let</span>
<span class="p">(</span><span class="k">let </span><span class="nv">loop</span> <span class="p">((</span><span class="nf">i</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">limit</span> <span class="mi">5</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">i</span> <span class="nv">limit</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">printf</span> <span class="s">&quot;i = ~a\n&quot;</span> <span class="nv">i</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">loop</span> <span class="p">(</span><span class="nf">add1</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">limit</span><span class="p">)))</span>          <span class="c1">;; =&gt; i = 0, i = 1....</span>

<span class="c1">;; &#39;do&#39; is another iteration construct</span>
<span class="c1">;; It initializes a set of variables and updates them in each iteration</span>
<span class="c1">;; A final expression is evaluated after the exit condition is met</span>
<span class="p">(</span><span class="k">do </span><span class="p">((</span><span class="nf">x</span> <span class="mi">0</span> <span class="p">(</span><span class="nf">add1</span> <span class="nv">x</span> <span class="p">)))</span>            <span class="c1">;; initialize x = 0 and add 1 in each iteration</span>
  <span class="p">((</span><span class="nb">= </span><span class="nv">x</span> <span class="mi">10</span><span class="p">)</span> <span class="p">(</span><span class="nf">print</span> <span class="s">&quot;done&quot;</span><span class="p">))</span>      <span class="c1">;; exit condition and final expression</span>
  <span class="p">(</span><span class="nf">print</span> <span class="nv">x</span><span class="p">))</span>                     <span class="c1">;; command to execute in each step</span>
                                 <span class="c1">;; =&gt; 0,1,2,3....9,done</span>

<span class="c1">;; Iteration over lists </span>
<span class="p">(</span><span class="nb">for-each </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">print</span> <span class="p">(</span><span class="nb">* </span><span class="nv">a</span> <span class="nv">a</span><span class="p">)))</span>
          <span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span><span class="p">))</span>                  <span class="c1">;; =&gt; 9, 25, 49</span>

<span class="c1">;; &#39;map&#39; is like for-each but returns a list</span>
<span class="p">(</span><span class="nb">map </span><span class="nv">add1</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">11</span> <span class="mi">22</span> <span class="mi">33</span><span class="p">))</span>               <span class="c1">;; =&gt; (12 23 34)</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 7. Extensions</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; The CHICKEN core is very minimal, but additional features are provided by library extensions known as Eggs.</span>
<span class="c1">;; You can install Eggs with &#39;chicken-install &lt;eggname&gt;&#39; command.</span>

<span class="c1">;; &#39;numbers&#39; egg provides support for full numeric tower.</span>
<span class="p">(</span><span class="nf">require-extension</span> <span class="nv">numbers</span><span class="p">)</span>
<span class="c1">;; complex numbers</span>
<span class="mi">3</span><span class="nv">+4i</span>                               <span class="c1">;; =&gt; 3+2i</span>
<span class="c1">;; Supports fractions without falling back to inexact flonums</span>
<span class="mi">1</span><span class="nv">/3</span>                                <span class="c1">;; =&gt; 1/3</span>
<span class="c1">;; provides support for large integers through bignums</span>
<span class="p">(</span><span class="nb">expt </span><span class="mi">9</span> <span class="mi">20</span><span class="p">)</span>                        <span class="c1">;; =&gt; 12157665459056928801 </span>
<span class="c1">;; And other &#39;extended&#39; functions</span>
<span class="p">(</span><span class="nb">log </span><span class="mi">10</span> <span class="p">(</span><span class="nb">exp </span><span class="mi">1</span><span class="p">))</span>                   <span class="c1">;; =&gt; 2.30258509299405</span>
<span class="p">(</span><span class="nb">numerator </span><span class="mi">2</span><span class="nv">/3</span><span class="p">)</span>                    <span class="c1">;; =&gt; 2</span>

<span class="c1">;; &#39;utf8&#39; provides unicode support</span>
<span class="p">(</span><span class="nf">require-extension</span> <span class="nv">utf8</span><span class="p">)</span>
<span class="s">&quot;\u03BBx:(\u03BC\u0251.\u0251\u2192\u0251).xx&quot;</span> <span class="c1">;; =&gt; &quot;??x:(????.???????).xx&quot;</span>

<span class="c1">;; &#39;posix&#39; provides file I/O and lots of other services for unix-like operating systems</span>
<span class="c1">;; Some of the functions are not available in Windows system,</span>
<span class="c1">;; See http://wiki.call-cc.org/man/4/Unit%20posix for more details</span>

<span class="c1">;; Open a file to append, open &quot;write only&quot; and create file if it does not exist</span>
<span class="p">(</span><span class="k">define </span><span class="nv">outfn</span> <span class="p">(</span><span class="nf">file-open</span> <span class="s">&quot;chicken-hen.txt&quot;</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">open/append</span> <span class="nv">open/wronly</span> <span class="nv">open/creat</span><span class="p">)))</span>
<span class="c1">;; write some text to the file</span>
<span class="p">(</span><span class="nf">file-write</span> <span class="nv">outfn</span> <span class="s">&quot;Did chicken came before hen?&quot;</span><span class="p">)</span> 
<span class="c1">;; close the file</span>
<span class="p">(</span><span class="nf">file-close</span> <span class="nv">outfn</span><span class="p">)</span>
<span class="c1">;; Open the file &quot;read only&quot;</span>
<span class="p">(</span><span class="k">define </span><span class="nv">infn</span> <span class="p">(</span><span class="nf">file-open</span> <span class="s">&quot;chicken-hen.txt&quot;</span> <span class="nv">open/rdonly</span><span class="p">))</span>
<span class="c1">;; read some text from the file</span>
<span class="p">(</span><span class="nf">file-read</span> <span class="nv">infn</span> <span class="mi">30</span><span class="p">)</span>         <span class="c1">;; =&gt; (&quot;Did chicken came before hen?  &quot;, 28)</span>
<span class="p">(</span><span class="nf">file-close</span> <span class="nv">infn</span><span class="p">)</span>

<span class="c1">;; CHICKEN also supports SRFI (Scheme Requests For Implementation) extensions</span>
<span class="c1">;; See &#39;http://srfi.schemers.org/srfi-implementers.html&quot; to see srfi&#39;s supported by CHICKEN</span>
<span class="p">(</span><span class="nf">require-extension</span> <span class="nv">srfi-1</span><span class="p">)</span>         <span class="c1">;; list library</span>
<span class="p">(</span><span class="nf">filter</span> <span class="nv">odd?</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span>     <span class="c1">;; =&gt; (1 3 5 7)</span>
<span class="p">(</span><span class="nf">count</span> <span class="nv">even?</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>         <span class="c1">;; =&gt; 2</span>
<span class="p">(</span><span class="nf">take</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">12</span> <span class="mi">24</span> <span class="mi">36</span> <span class="mi">48</span> <span class="mi">60</span><span class="p">)</span> <span class="mi">3</span><span class="p">)</span>         <span class="c1">;; =&gt; (12 24 36)</span>
<span class="p">(</span><span class="nf">drop</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">12</span> <span class="mi">24</span> <span class="mi">36</span> <span class="mi">48</span> <span class="mi">60</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span>         <span class="c1">;; =&gt; (36 48 60)</span>
<span class="p">(</span><span class="nf">circular-list</span> <span class="ss">&#39;z</span> <span class="ss">&#39;q</span><span class="p">)</span>              <span class="c1">;; =&gt; z q z q ...</span>

<span class="p">(</span><span class="nf">require-extension</span> <span class="nv">srfi-13</span><span class="p">)</span>        <span class="c1">;; string library</span>
<span class="p">(</span><span class="nf">string-reverse</span> <span class="s">&quot;pan&quot;</span><span class="p">)</span>             <span class="c1">;; =&gt; &quot;nap&quot;</span>
<span class="p">(</span><span class="nf">string-index</span> <span class="s">&quot;Turkey&quot;</span> <span class="sc">#\k</span><span class="p">)</span>        <span class="c1">;; =&gt; 3</span>
<span class="p">(</span><span class="nf">string-every</span> <span class="nv">char-upper-case?</span> <span class="s">&quot;CHICKEN&quot;</span><span class="p">)</span> <span class="c1">;; =&gt; #t</span>
<span class="p">(</span><span class="nf">string-join</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;foo&quot;</span> <span class="s">&quot;bar&quot;</span> <span class="s">&quot;baz&quot;</span><span class="p">)</span> <span class="s">&quot;:&quot;</span><span class="p">)</span>    <span class="c1">;; =&gt; &quot;foo:bar:baz&quot;</span>


<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 8. Macros</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; A &#39;for .. in ..&#39; iteration like python, for lists</span>
<span class="p">(</span><span class="k">define-syntax </span><span class="nv">for</span>
  <span class="p">(</span><span class="k">syntax-rules </span><span class="p">(</span><span class="nf">in</span><span class="p">)</span>
                <span class="p">((</span><span class="nf">for</span> <span class="nv">elem</span> <span class="nv">in</span> <span class="nv">alist</span> <span class="nv">body</span> <span class="o">...</span><span class="p">)</span>
                 <span class="p">(</span><span class="nb">for-each </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">elem</span><span class="p">)</span> <span class="nv">body</span> <span class="o">...</span><span class="p">)</span> <span class="nv">alist</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">for</span> <span class="nv">x</span> <span class="nv">in</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">2</span> <span class="mi">4</span> <span class="mi">8</span> <span class="mi">16</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">print</span> <span class="nv">x</span><span class="p">))</span>          <span class="c1">;; =&gt; 2, 4, 8, 16</span>

<span class="p">(</span><span class="nf">for</span> <span class="nv">chr</span> <span class="nv">in</span> <span class="p">(</span><span class="nb">string-&gt;list </span><span class="s">&quot;PENCHANT&quot;</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">print</span> <span class="nv">chr</span><span class="p">))</span>        <span class="c1">;; =&gt; P, E, N, C, H, A, N, T</span>

<span class="c1">;; While loop</span>
<span class="p">(</span><span class="k">define-syntax </span><span class="nv">while</span>
  <span class="p">(</span><span class="k">syntax-rules </span><span class="p">()</span>
                <span class="p">((</span><span class="nf">while</span> <span class="k">cond </span><span class="nv">body</span> <span class="o">...</span><span class="p">)</span>
                 <span class="p">(</span><span class="k">let </span><span class="nv">loop</span> <span class="p">()</span>
                   <span class="p">(</span><span class="nf">when</span> <span class="nv">cond</span>
                     <span class="nv">body</span> <span class="o">...</span>
                     <span class="p">(</span><span class="nf">loop</span><span class="p">))))))</span>

<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">str</span> <span class="s">&quot;PENCHANT&quot;</span><span class="p">)</span> <span class="p">(</span><span class="nf">i</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">i</span> <span class="p">(</span><span class="nb">string-length </span><span class="nv">str</span><span class="p">))</span>     <span class="c1">;; while (condition)</span>
         <span class="p">(</span><span class="nf">print</span> <span class="p">(</span><span class="nb">string-ref </span><span class="nv">str</span> <span class="nv">i</span><span class="p">))</span>    <span class="c1">;; body </span>
         <span class="p">(</span><span class="k">set! </span><span class="nv">i</span> <span class="p">(</span><span class="nf">add1</span> <span class="nv">i</span><span class="p">))))</span>           
                                       <span class="c1">;; =&gt; P, E, N, C, H, A, N, T</span>

<span class="c1">;; Advanced Syntax-Rules Primer -&gt; http://petrofsky.org/src/primer.txt</span>
<span class="c1">;; Macro system in chicken -&gt; http://lists.gnu.org/archive/html/chicken-users/2008-04/msg00013.html</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">; 9. Modules</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Also See http://wiki.call-cc.org/man/4/Modules</span>

<span class="c1">;; The &#39;test&#39; module exports a value named &#39;hello&#39; and a macro named &#39;greet&#39;</span>
<span class="p">(</span><span class="nf">module</span> <span class="nv">test</span> <span class="p">(</span><span class="nf">hello</span> <span class="nv">greet</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">import</span> <span class="nv">scheme</span><span class="p">)</span>

  <span class="p">(</span><span class="k">define-syntax </span><span class="nv">greet</span>
    <span class="p">(</span><span class="k">syntax-rules </span><span class="p">()</span>
      <span class="p">((</span><span class="nf">_</span> <span class="nv">whom</span><span class="p">)</span> 
       <span class="p">(</span><span class="nf">begin</span>
         <span class="p">(</span><span class="nb">display </span><span class="s">&quot;Hello, &quot;</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">display </span><span class="nv">whom</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">display </span><span class="s">&quot; !\n&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>

  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">hello</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">greet</span> <span class="s">&quot;world&quot;</span><span class="p">)</span> <span class="p">)</span>  <span class="p">)</span>

<span class="c1">;; we can define our modules in a separate file (say test.scm) and load them to the interpreter with</span>
<span class="c1">;;         (load &quot;test.scm&quot;)</span>

<span class="c1">;; import the module</span>
<span class="p">(</span><span class="nf">import</span> <span class="nv">test</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hello</span><span class="p">)</span>                <span class="c1">;; =&gt; Hello, world !</span>
<span class="p">(</span><span class="nf">greet</span> <span class="s">&quot;schemers&quot;</span><span class="p">)</span>     <span class="c1">;; =&gt; Hello, schemers !</span>

<span class="c1">;; We can compile the module files in to shared libraries by using following command,</span>
<span class="c1">;;         csc -s test.scm</span>
<span class="c1">;;         (load &quot;test.so&quot;)</span>

<span class="c1">;; Functors</span>
<span class="c1">;; Functors are high level modules that can be parameterized by other modules</span>
<span class="c1">;; Following functor requires another module named &#39;M&#39; that provides a function called &#39;multiply&#39;</span>
<span class="c1">;; The functor itself exports a generic function &#39;square&#39;</span>
<span class="p">(</span><span class="nf">functor</span> <span class="p">(</span><span class="nf">squaring-functor</span> <span class="p">(</span><span class="nf">M</span> <span class="p">(</span><span class="nf">multiply</span><span class="p">)))</span> <span class="p">(</span><span class="nf">square</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">import</span> <span class="nv">scheme</span> <span class="nv">M</span><span class="p">)</span> 
         <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">square</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">multiply</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)))</span>

<span class="c1">;; Module &#39;nums&#39; can be passed as a parameter to &#39;squaring-functor&#39;</span>
<span class="p">(</span><span class="nf">module</span> <span class="nv">nums</span> <span class="p">(</span><span class="nf">multiply</span><span class="p">)</span> 
        <span class="p">(</span><span class="nf">import</span> <span class="nv">scheme</span><span class="p">)</span>     <span class="c1">;; predefined modules</span>
        <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">multiply</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">y</span><span class="p">)))</span> 
<span class="c1">;; the final module can be imported and used in our program</span>
<span class="p">(</span><span class="nf">module</span> <span class="nv">number-squarer</span> <span class="nv">=</span> <span class="p">(</span><span class="nf">squaring-functor</span> <span class="nv">nums</span><span class="p">))</span> 

<span class="p">(</span><span class="nf">import</span> <span class="nv">number-squarer</span><span class="p">)</span>
<span class="p">(</span><span class="nf">square</span> <span class="mi">3</span><span class="p">)</span>              <span class="c1">;; =&gt; 9</span>

<span class="c1">;; We can instantiate the functor for other inputs</span>
<span class="c1">;; Here&#39;s another example module that can be passed to squaring-functor</span>
<span class="p">(</span><span class="nf">module</span> <span class="nv">stars</span> <span class="p">(</span><span class="nf">multiply</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">import</span> <span class="nv">chicken</span> <span class="nv">scheme</span><span class="p">)</span>  <span class="c1">;; chicken module for the &#39;use&#39; keyword</span>
        <span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-1</span><span class="p">)</span>             <span class="c1">;; we can use external libraries in our module</span>
        <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">multiply</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">list-tabulate</span> <span class="nv">x</span> <span class="p">(</span><span class="k">lambda </span><span class="nv">_</span> <span class="p">(</span><span class="nf">list-tabulate</span> <span class="nv">y</span> <span class="p">(</span><span class="k">lambda </span><span class="nv">_</span> <span class="ss">&#39;*</span><span class="p">))))))</span>
<span class="p">(</span><span class="nf">module</span> <span class="nv">star-squarer</span> <span class="nv">=</span> <span class="p">(</span><span class="nf">squaring-functor</span> <span class="nv">stars</span><span class="p">))</span>

<span class="p">(</span><span class="nf">import</span> <span class="nv">star-squarer</span><span class="p">)</span>
<span class="p">(</span><span class="nf">square</span> <span class="mi">3</span><span class="p">)</span>              <span class="c1">;; =&gt; ((* * *)(* * *)(* * *))</span>
</pre></div>
<h2>Further Reading</h2>

<ul>
<li><a href="http://wiki.call-cc.org/man/4/The%20User%27s%20Manual">CHICKEN User&rsquo;s Manual</a>.</li>
<li><a href="http://www.schemers.org/Documents/Standards/R5RS">R5RS standards</a></li>
</ul>

<h2>Extra Info</h2>

<ul>
<li><a href="http://wiki.call-cc.org/chicken-for-programmers-of-other-languages">For programmers of other languages</a></li>
<li><a href="http://plr.sourceforge.net/cgi-bin/plr/launch.py">Compare CHICKEN syntax with other languages</a></li>
</ul>

    <hr>
    <p>Got a suggestion? A correction, perhaps? <a href="https://github.com/adambard/learnxinyminutes-docs/issues/new">Open an Issue</a> on the Github Repo, or make a <a href="https://github.com/adambard/learnxinyminutes-docs/edit/master/CHICKEN.html.markdown">pull request</a> yourself!
    </p>
    <p class="contributed">
    Originally contributed by Diwakar Wagle, and updated by <a href="https://github.com/adambard/learnxinyminutes-docs/blame/master/CHICKEN.html.markdown">4 contributor(s)</a>.
    </p>

    <footer>
    <a style="float: left" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
    <p>
    &copy; 2019
        <a href="https://github.com/deewakar">Diwakar Wagle</a>
    </p>

    <p>

    </footer>
  </div>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-3525624-21'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
